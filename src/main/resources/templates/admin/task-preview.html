<style>
  /* Main container improvements */
  .main-task-content {
    display: flex;
    flex: 1;
    height: 91vh;
    max-height: 91vh;
    gap: 1rem;
    padding: 1rem;
    background: #f8f9fa;
  }

  /* Editor section improvements */
  .editor-section {
    flex: 1.2;
    background: #272822;
    position: relative;
    /*border-radius: 1rem;*/
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(44, 24, 16, 0.1);
    transition: box-shadow 0.3s ease;
  }

  .editor-section:hover {
    box-shadow: 0 6px 12px rgba(44, 24, 16, 0.15);
  }

  #editor {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    font-size: 15px;
    font-family: 'Fira Code', 'Consolas', monospace;
  }

  /* Task section improvements */
  .task-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 4px 6px rgba(44, 24, 16, 0.1);
    transition: box-shadow 0.3s ease;
  }

  .task-section:hover {
    box-shadow: 0 6px 12px rgba(44, 24, 16, 0.15);
  }

  /* Tabs improvements */
  .tabs {
    display: flex;
    background: #f8f9fa;
    padding: 0.75rem 1rem 0;
    gap: 0.25rem;
    border-radius: 1rem 1rem 0 0;
    border-bottom: 2px solid #dee2e6;
  }

  .tab {
    padding: 0.875rem 1.5rem;
    cursor: pointer;
    border: none;
    background: none;
    font-weight: 500;
    color: #495057;
    position: relative;
    transition: all 0.2s ease;
    border-radius: 0.8rem 0.8rem 0 0;
    font-size: 0.95rem;
  }

  .tab:hover {
    background: #fff5eb;
    color: #2c1810;
  }

  .tab.active {
    color: #2c1810;
    background: #fff5eb;
    font-weight: 600;
  }

  .tab.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 2px;
    background: #E6AA68;
    border-radius: 2px 2px 0 0;
  }

  /* Content area improvements */
  .tab-content {
    flex: 1;
    padding: 1.5rem;
    overflow-y: auto;
    background: #fff5eb;
    border-radius: 0 0 1rem 1rem;
  }

  /* Run button improvements */
  .run-button {
    position: absolute;
    right: 1rem;
    top: 1rem;
    padding: 0.625rem 1.25rem;
    background: #E6AA68;
    color: #2c1810;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    font-weight: 600;
    z-index: 10;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.95rem;
    box-shadow: 0 2px 4px rgba(44, 24, 16, 0.1);
  }

  .run-button:hover {
    background: #d99b59;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(44, 24, 16, 0.15);
  }

  .run-button:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(44, 24, 16, 0.1);
  }

  #schoolForm {
    margin-top: auto; /* Ensure the form stays at the bottom */
    padding: 1rem;
  }

  textarea {
    width: 100%;
    padding: 0.5rem;
    margin-bottom: 1rem;
    border-radius: 0.5rem;
    border: 1px solid #ccc;
  }

  .mendo-btn {
    padding: 0.5rem 1rem;
    background: #E6AA68;
    color: #2c1810;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
  }

  /* Task content improvements */
  .task-info {
    display: flex;
    gap: 2rem;
    margin-bottom: 2rem;
    color: #495057;
    background: #fff;
    padding: 1.25rem 1.5rem;
    border-radius: 0.8rem;
    box-shadow: 0 2px 4px rgba(44, 24, 16, 0.05);
    font-size: 0.95rem;
  }

  .task-info span {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* Sample case improvements */
  .sample-case {
    background: #fff;
    border-radius: 0.8rem;
    padding: 1.5rem;
    margin: 1.5rem 0;
    box-shadow: 0 2px 4px rgba(44, 24, 16, 0.05);
    border: 1px solid rgba(44, 24, 16, 0.1);
  }

  .sample-case pre {
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 0.5rem;
    margin: 0.75rem 0;
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 0.95rem;
    border: 1px solid #dee2e6;
  }

  /* Scrollbar styling */
  .tab-content::-webkit-scrollbar {
    width: 8px;
  }

  .tab-content::-webkit-scrollbar-track {
    background: transparent;
  }

  .tab-content::-webkit-scrollbar-thumb {
    background: #E6AA68;
    border-radius: 4px;
  }

  .tab-content::-webkit-scrollbar-thumb:hover {
    background: #d99b59;
  }

  /* Forum tab specific styles */
  #forum {
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* Posts container styles */
  #forum .forum-posts-container {
    flex: 1;
    overflow-y: auto;
    margin-bottom: 1rem; /* Add some space between posts and form */
  }

  /* Form styles */
  #schoolForm {
    margin-top: auto; /* This pushes the form to the bottom of the flex container */
    background: #fff5eb;
    padding: 1rem;
    border-top: 1px solid rgba(44, 24, 16, 0.1);
    box-shadow: 0 -2px 10px rgba(44, 24, 16, 0.05);
  }

  /* Adjust scrollbar for the posts container */
  #forum .forum-posts-container::-webkit-scrollbar {
    width: 8px;
  }

  #forum .forum-posts-container::-webkit-scrollbar-track {
    background: transparent;
  }

  #forum .forum-posts-container::-webkit-scrollbar-thumb {
    background: #E6AA68;
    border-radius: 4px;
  }

  #forum .forum-posts-container::-webkit-scrollbar-thumb:hover {
    background: #d99b59;
  }

  /* Forum post improvements */
  .forum-post {
    background: #fff;
    border-radius: 0.8rem;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    box-shadow: 0 2px 4px rgba(44, 24, 16, 0.05);
    border: 1px solid rgba(44, 24, 16, 0.1);
    transition: box-shadow 0.2s ease;
  }

  .forum-post:hover {
    box-shadow: 0 4px 8px rgba(44, 24, 16, 0.1);
  }

  .post-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid #dee2e6;
  }

  .post-header span:first-child {
    font-weight: 600;
    color: #2c1810;
    font-size: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .post-header span:first-child::before {
    content: '';
    width: 24px;
    height: 24px;
    background: #E6AA68;
    border-radius: 50%;
    display: inline-block;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%232c1810' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2'/%3E%3Ccircle cx='12' cy='7' r='4'/%3E%3C/svg%3E");
    background-size: 16px;
    background-position: center;
    background-repeat: no-repeat;
  }

  .post-header span:last-child {
    color: #6c757d;
    font-size: 0.9rem;
  }

  .forum-post p {
    color: #495057;
    line-height: 1.6;
    margin: 0;
    font-size: 0.95rem;
  }

  /* Task content improvements */
</style>

<div class="main-task-content">
  <div class="editor-section">
    <button class="run-button">–ü—Ä–æ–≤–µ—Ä–∏ ‚èµ</button>
    <div id="editor"></div>
  </div>
  <div class="task-section">
    <div class="tabs">
      <button class="tab active" onclick="switchTab('task')">–ó–∞–¥–∞—á–∞</button>
      <button class="tab" onclick="switchTab('forum')">–§–æ—Ä—É–º</button>
      <button class="tab" onclick="switchTab('editorial')">–†–µ—à–µ–Ω–∏–µ</button>
    </div>
    <div th:object="${task}" class="tab-content">
      <div id="task" class="tab-pane active">
        <h1 th:text="*{title}">Task Title</h1>
        <div class="task-info">
          <span>‚è±Ô∏è –í—Ä–µ–º–µ–Ω—Å–∫–æ –æ–≥—Ä–∞–Ω–∏—á—É–≤–∞—ö–µ: <span th:text="*{timeLimit}"></span> ms</span>
          <span>üíæ –ú–µ–º–æ—Ä–∏—Å–∫–æ –æ–≥—Ä–∞–Ω–∏—á—É–≤–∞—ö–µ: <span th:text="*{memoryLimit}"></span> MB</span>
        </div>
        <div th:utext="*{text}"></div>

        <h3>–í–ª–µ–∑</h3>
        <div th:utext="*{inputFormat}"></div>

        <h3>–ò–∑–ª–µ–∑</h3>
        <div th:utext="*{outputFormat}"></div>

        <h3>–ü—Ä–∏–º–µ—Ä–∏</h3>
        <div class="sample-case">
          <strong>–í–ª–µ–∑:</strong>
          <pre>3 5</pre>
          <strong>–ò–∑–ª–µ–∑:</strong>
          <pre>8</pre>
        </div>
      </div>

      <div id="forum" class="tab-pane">
        <div class="forum-posts-container">
          <div class="forum-post" th:each="post : ${posts}">
            <!-- ... existing forum post content ... -->
            <div class="post-header">
            <span
                th:text="${post?.mendoUser?.name + ' ' + post?.mendoUser?.surname}">Null</span>
              <!--                        <span th:text="${#temporals.format(post?.timestamp, '–ø—Ä–µ–¥ ')} + ${T(java.time.temporal.ChronoUnit.DAYS).between(post?.timestamp, T(java.time.LocalDateTime).now())} + ' –¥–µ–Ω–∞'"></span>-->
            </div>
            <p th:text="${post?.description}">/</p>
          </div>
        </div>
        <form id="schoolForm" method="POST" th:action="@{'/posts/' + *{thread?.id}}">
          <!-- ... existing form content ... -->
          <div class="form-group">
        <textarea
            class="form-control"
            name="description"
            placeholder="add comment"
        ></textarea>
          </div>
          <button type="submit" class="mendo-btn">
            –û—Å—Ç–∞–≤–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä
          </button>
        </form>
      </div>


      <div id="editorial" class="tab-pane">
        <div class="editorial-content">
          <h2>–†–µ—à–µ–Ω–∏–µ</h2>
          <p>–ó–∞ –¥–∞ –≥–æ —Ä–µ—à–∏–º–µ –æ–≤–æ—ò –ø—Ä–æ–±–ª–µ–º, –ø–æ—Ç—Ä–µ–±–Ω–æ –µ –¥–∞:</p>
          <ol>
            <li>–ü—Ä–æ—á–∏—Ç–∞–º–µ –¥–≤–∞ –±—Ä–æ—ò–∞ –æ–¥ –≤–ª–µ–∑</li>
            <li>–ì–∏ —Å–æ–±–µ—Ä–µ–º–µ –±—Ä–æ–µ–≤–∏—Ç–µ</li>
            <li>–ì–æ –∏—Å–ø–µ—á–∞—Ç–∏–º–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–æ—Ç</li>
          </ol>
          <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ—Å—Ç: O(1)</p>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.6/ace.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.6/theme-monokai.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.6/mode-c_cpp.min.js"></script>
<script>
  // Initialize ACE Editor
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/monokai");
  editor.session.setMode("ace/mode/c_cpp");
  editor.setShowPrintMargin(false);

  function switchTab(tabId) {
    document.querySelectorAll('.tab').forEach(tab => {
      tab.classList.remove('active');
    });
    event.currentTarget.classList.add('active');

    document.querySelectorAll('.tab-pane').forEach(pane => {
      pane.classList.remove('active');
    });
    document.getElementById(tabId).classList.add('active');
  }
</script>
